#!/usr/bin/env bash
# @description test stack-tools modules
# @import docker/downloadGosu
# @import docker/downloadTini
# @import hashicorp/downloadPacker
# @import hashicorp/downloadTerraform
# @import restic/downloadRestic
# @import sharkdp/downloadHyperfine
# @import ncw/downloadRclone
# @import console/info

main ()
{
    verbose true
    strict true
    local code=0

    rm -rf \
        "${MANAGE_REPOSITORY:?}/vendor/tini" \
        "${MANAGE_REPOSITORY:?}/vendor/gosu" \
        "${MANAGE_REPOSITORY:?}/vendor/packer" \
        "${MANAGE_REPOSITORY:?}/vendor/terraform" \
        "${MANAGE_REPOSITORY:?}/vendor/restic" \
        "${MANAGE_REPOSITORY:?}/vendor/hyperfine" \
        "${MANAGE_REPOSITORY:?}/vendor/rclone"

    _ info "Downloading tini ..."
    _ downloadTini || ((exitCode++))
    _ info "Downloading gosu ..."
    _ downloadGosu || ((exitCode++))
    _ info "Downloading packer ..."
    _ downloadPacker || ((exitCode++))
    _ info "Downloading terraform ..."
    _ downloadTerraform || ((exitCode++))
    _ info "Downloading restic ..."
    _ downloadRestic || ((exitCode++))
    _ info "Downloading hyperfine..."
    _ downloadHyperfine || ((exitCode++))
    _ info "Downloading rclone..."
    _ downloadRclone || ((exitCode++))

    exit "${code}"
}

